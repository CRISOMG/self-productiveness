# Secrets & Environment Variables Checklist

When restoring YourFocus to a **new Supabase project**, these secrets and environment variables must be reconfigured manually. They are NOT included in database backups.

## Auto-generated by Supabase (new values per project)

These change with every new project. Update your `.env` files accordingly.

| Secret                      | Where to find                   |
| --------------------------- | ------------------------------- |
| `SUPABASE_URL`              | Dashboard → Settings → API      |
| `SUPABASE_ANON_KEY`         | Dashboard → Settings → API      |
| `SUPABASE_SERVICE_ROLE_KEY` | Dashboard → Settings → API      |
| Database connection string  | Dashboard → Settings → Database |

## Edge Function Secrets (set in Dashboard)

Configure these in **Dashboard → Settings → Edge Functions → Secrets**:

| Secret              | Description                    | How to get                                                                 |
| ------------------- | ------------------------------ | -------------------------------------------------------------------------- |
| `VAPID_PUBLIC_KEY`  | Web Push public key            | Keep backup of original, or regenerate with `web-push generate-vapid-keys` |
| `VAPID_PRIVATE_KEY` | Web Push private key           | Same as above — **must match** the public key                              |
| `VAPID_EMAIL`       | Contact email for push service | `mailto:admin@yourfocus.app`                                               |

> ⚠️ **If you regenerate VAPID keys**, all existing push subscriptions in user browsers become invalid. Users will need to re-subscribe.

## App Environment Variables

Update these in your deployment environment (Vercel, `.env`, etc.):

| Variable                    | Notes                |
| --------------------------- | -------------------- |
| `NUXT_SUPABASE_URL`         | New project URL      |
| `NUXT_SUPABASE_KEY`         | New anon key         |
| `NUXT_SUPABASE_SERVICE_KEY` | New service role key |

## OAuth Providers (if configured)

If you have OAuth providers (Google, GitHub, etc.) configured in **Dashboard → Authentication → Providers**, you'll need to:

1. Re-enter the client ID and secret for each provider
2. Update the OAuth redirect URL in the provider's console to point to the new Supabase project URL

## Webhook URLs

Database webhooks that point to edge functions use the project URL. After restore:

1. Go to **Dashboard → Database → Webhooks**
2. Update any webhook URLs that reference the old project ref
3. The `send-push` function webhook should auto-configure if you redeploy with `supabase functions deploy`
